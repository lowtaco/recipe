<template>
  <div class="additional-info">
    
    <div class="card">
      <h4>–û–ø–∏—Å–∞–Ω–∏–µ</h4>
      
      <div class="description"><p>{{ description }}</p></div>
      
      <div class="timings">
        <div class="item">
          <span>1 —á–∞—Å</span>
          <p>–í—Ä–µ–º—è –ø—Ä–∏–≥–æ—Ç–æ–≤–ª–µ–Ω–∏—è</p>
        </div>
        <div class="item">
          <span>25 –º–∏–Ω—É—Ç</span>
          <p>–í—Ä–µ–º—è –Ω–∞ –∫—É—Ö–Ω–µ</p>
        </div>
      </div>

      <div class="list">
        <div class="item">
          <div class="indicator"></div>
          <div class="item-content">
            <span>üåÖ –ü–æ–¥–æ–π–¥–µ—Ç –Ω–∞:</span>
            <p>–ó–∞–≤—Ç—Ä–∞–∫, –æ–±–µ–¥ –∏ —É–∂–∏–Ω</p>
          </div>
        </div>

        <div class="item">
          <div class="indicator"></div>
          <div class="item-content">
            <span>üç≥ –°–ø–æ—Å–æ–±—ã –ø—Ä–∏–≥–æ—Ç–æ–≤–ª–µ–Ω–∏—è:</span>
            <p>–ê—ç—Ä–æ–≥—Ä–∏–ª—å</p>
          </div>
        </div>

        <div class="item">
          <div class="indicator"></div>
          <div class="item-content">
            <span>üç¥ –ü–æ—Å—É–¥–∞:</span>
            <p>–ú–∏–∫—Å–µ—Ä, —Å–æ–∫–æ–≤—ã–∂–∏–º–∞–ª–∫–∞</p>
          </div>
        </div>
      </div>
      
    </div>
  </div>
</template>
<script>

export default {
  props: ['description', 'fat', 'carbs', 'startDelay'],
  data() {
    return {
      unit: '–≥—Ä.',
      delayTime: 1000,
      calories: 0,
      proteinPercents: 0,
      fatPercents: 0,
      carbsPercents: 0
    }
  },
  watch: {
    startDelay() {
      if(this.startDelay == false) {
        this.calculate()
      }
    }
  },
  mounted() {
    //setTimeout(this.calculate, this.delayTime)
  },
  methods: {
    async calculate() {
      let protein = Number(this.protein);
      let fat = Number(this.fat);
      let carbs = Number(this.carbs);

      let total = protein + fat + carbs;

      this.proteinPercents = Math.round(protein / total * 100);
      this.fatPercents = Math.round(fat / total * 100);
      this.carbsPercents = Math.round(carbs / total * 100);

      let kcal_protein = 4;
      let kcal_carbs = 4;
      let kcal_fat = 9;

      this.calories = (this.protein * kcal_protein) + (this.carbs * kcal_carbs) + (this.fat * kcal_fat);
    },
  },
};
</script>